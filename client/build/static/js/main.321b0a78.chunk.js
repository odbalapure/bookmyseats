(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),s=a(24),n=a.n(s),l=(a(31),a(4)),i=a.n(l),o=a(5),b=a(3),j=a(6),d=a.n(j),m=a(2),u=a(9),h=a(0);var x=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useRef)(),n=Object(r.useRef)(),l=Object(r.useState)(""),j=Object(b.a)(l,2),x=j[0],O=j[1],p=Object(m.f)(),f=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O("Logging you in, please wait..."),t.preventDefault(),""!==s.current.value&&""!==n.current.value){e.next=5;break}return c("Email and password are mandatory!"),e.abrupt("return");case 5:return c(""),a={email:s.current.value,password:n.current.value},e.prev=7,e.next=10,d.a.post("".concat("https://bookmyseats.herokuapp.com/api/v1/auth/login"),a);case 10:r=e.sent,l={name:r.data.name,email:r.data.email,token:r.data.token,role:r.data.role},localStorage.setItem("bookmyseat_user",JSON.stringify(l)),O(""),p("/",{replace:!0}),window.location.reload(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),O(""),c("User may not exist or the account has not been verified!");case 22:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{style:{marginTop:"5rem"},className:"container d-flex justify-content-center flex-wrap flex-column",children:[Object(h.jsx)("div",{style:{border:"1px solid lightgray",padding:"1rem",margin:"2rem",borderRadius:"1rem"},children:Object(h.jsxs)("form",{className:"p-3",children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"email",className:"form-label fw-bold",children:"Email address"}),Object(h.jsx)("input",{type:"email",className:"form-control",id:"email",ref:s})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"password",className:"form-label fw-bold",children:"Password"}),Object(h.jsx)("input",{type:"password",className:"form-control",id:"password",ref:n})]}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(u.b,{to:"/signup",children:Object(h.jsx)("button",{style:{color:"dodgerblue",fontWeight:"600",borderStyle:"none",backgroundColor:"#fff"},children:Object(h.jsx)("u",{children:"Create Account"})})}),"|",Object(h.jsx)(u.b,{to:"/forgot-password",children:Object(h.jsx)("button",{style:{color:"#f76865",fontWeight:"600",borderStyle:"none",backgroundColor:"#fff"},children:Object(h.jsx)("u",{children:"Forgot Password"})})})]}),Object(h.jsx)("button",{type:"submit",className:"btn btn-success",onClick:f,children:"Login"})]})]})}),Object(h.jsx)("div",{children:a?Object(h.jsx)("p",{className:"d-flex justify-content-center alert alert-danger",role:"alert",children:a}):null}),x?Object(h.jsx)("p",{className:"d-flex fs-4 justify-content-center alert alert-primary",role:"alert",children:x}):null]})};var O=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(""),n=Object(b.a)(s,2),l=n[0],j=n[1],m=Object(r.useRef)(),u=Object(r.useRef)(),x=Object(r.useRef)(),O=Object(r.useRef)(),p=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==u.current.value&&""!==x.current.value){e.next=6;break}return j("Username, Email and password are mandatory!"),e.abrupt("return");case 6:j("");case 7:return a={name:m.current.value,email:u.current.value,password:x.current.value,phone:O.current.value},e.prev=8,e.next=11,d.a.post("".concat("https://bookmyseats.herokuapp.com/api/v1/auth/register"),a);case 11:c(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),j("User registration failed, try again some time later...");case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{style:{marginTop:"5rem"},className:"container d-flex justify-content-center flex-column",children:[Object(h.jsx)("div",{style:{border:"1px solid lightgray",padding:"1rem",margin:"2rem",borderRadius:"1rem",boxSizing:"border-box"},children:Object(h.jsxs)("form",{className:"p-3",children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"name",className:"form-label fw-bold",children:"Username"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"name",ref:m})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"email",className:"form-label fw-bold",children:"Email address"}),Object(h.jsx)("input",{type:"email",className:"form-control",id:"email",ref:u})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"phone",className:"form-label fw-bold",children:"Phone"}),Object(h.jsx)("input",{type:"phone",className:"form-control",id:"phone",ref:O})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"password",className:"form-label fw-bold",children:"Password"}),Object(h.jsx)("input",{type:"password",className:"form-control",id:"password",ref:x})]}),Object(h.jsx)("div",{className:"d-grid gap-2",children:Object(h.jsx)("button",{className:"btn btn-primary",type:"button",onClick:p,children:"Register"})})]})}),Object(h.jsx)("div",{children:l?Object(h.jsx)("p",{className:"d-flex justify-content-center alert alert-danger",role:"alert",children:"Username, Email and Password are mandatory!"}):null}),Object(h.jsx)("div",{children:a?Object(h.jsxs)("p",{className:"d-flex justify-content-center alert alert-success",role:"alert",children:["An email has been sent to ",u.current.value,", to confirm your registration!"]}):null})]})};var p=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useRef)(),n=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(""),t.preventDefault(),!s){e.next=14;break}if(""!==s.current.value){e.next=6;break}return c("Please enter an email id!"),e.abrupt("return");case 6:return e.prev=6,e.next=9,d.a.patch("".concat("https://guvi-task-session-37.herokuapp.com/api/v1/auth/forgot-password"),{email:s.current.value});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),c("User does not exist...");case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",style:{border:"1px solid lightgray",marginTop:"2rem",borderRadius:"1rem"},children:[Object(h.jsxs)("form",{className:"py-5",children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"email",className:"form-label fw-bold",children:"Email"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"email",ref:s,placeholder:"Enter email to get password reset link"})]}),Object(h.jsx)("div",{className:"d-grid gap-2",children:Object(h.jsx)("button",{className:"btn btn-warning",type:"button",onClick:n,style:{marginTop:"1rem"},children:"Send Password Reset Link"})})]}),Object(h.jsx)("div",{children:a?Object(h.jsx)("p",{className:"d-flex justify-content-center alert alert-danger",role:"alert",children:a}):null})]})};var f=function(){var e=Object(m.g)(),t=Object(r.useState)(""),a=Object(b.a)(t,2),c=a[0],s=a[1],n=Object(r.useRef)(),l=function(){var t=Object(o.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s(""),a.preventDefault(),!n){t.next=14;break}if(""!==n.current.value){t.next=6;break}return s("Please enter a password!"),t.abrupt("return");case 6:return t.prev=6,t.next=9,d.a.patch("".concat("https://guvi-task-session-37.herokuapp.com/api/v1/auth/reset-password"),{email:e.email,password:n.current.value});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),s("User does not exist...");case 14:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",style:{border:"1px solid lightgray",marginTop:"2rem",borderRadius:"1rem"},children:[Object(h.jsxs)("form",{className:"py-5",children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsxs)("label",{htmlFor:"password",className:"form-label fw-bold",children:['Enter new password for "',e.email,'"']}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"password",ref:n,placeholder:"New password"})]}),Object(h.jsx)("div",{className:"d-grid gap-2",children:Object(h.jsx)("button",{className:"btn btn-success",type:"button",onClick:l,style:{marginTop:"1rem"},children:"Reset Password"})})]}),Object(h.jsx)("div",{children:c?Object(h.jsx)("p",{className:"d-flex justify-content-center alert alert-danger",role:"alert",children:c}):null})]})},v=c.a.createContext(),g=function(e){var t=e.children,a=Object(r.useState)([]),c=Object(b.a)(a,2),s=c[0],n=c[1],l=Object(r.useState)([]),j=Object(b.a)(l,2),m=j[0],u=j[1],x=Object(r.useState)(!1),O=Object(b.a)(x,2),p=O[0],f=O[1],g=Object(r.useState)(""),N=Object(b.a)(g,2),y=N[0],w=N[1],k=Object(r.useState)(""),S=Object(b.a)(k,2),C=S[0],R=S[1];Object(r.useEffect)((function(){localStorage.getItem("bookmyseat_user")&&""!==JSON.parse(localStorage.getItem("bookmyseat_user")).name&&f(!0)}),[]);var F=Object(r.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"https://bookmyseats.herokuapp.com/api/v1/theaters",!JSON.parse(localStorage.getItem("bookmyseat_user"))){e.next=7;break}return e.next=5,d.a.get("https://bookmyseats.herokuapp.com/api/v1/theaters",{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("bookmyseat_user")).token}});case 5:t=e.sent,n(t.data.theaters);case 7:w(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w("Something went wrong while fetching the vehicles...");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]);Object(r.useEffect)((function(){F()}),[C,F]);var T=Object(r.useCallback)(Object(o.a)(i.a.mark((function e(){var t,a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="https://bookmyseats.herokuapp.com/api/v1"+"/movies?search=".concat(C),e.next=4,d.a.get(t);case 4:a=e.sent,r=new Map,a.data.movies.forEach((function(e){r.set(e.name,e)})),c=[],r.forEach((function(e){return c.push(e)})),u(c),w(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w("Something went wrong while fetching the vehicles...");case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),[C]);return Object(r.useEffect)((function(){T()}),[T]),Object(h.jsx)(v.Provider,{value:{theaters:s,getTheaters:F,search:C,setSearch:R,warning:y,isLoggedIn:p,movies:m},children:t})},N=function(){return Object(r.useContext)(v)};var y=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{width:"100%",color:"azure",backgroundColor:"#333",height:"3rem"},children:Object(h.jsx)("a",{href:"#",alt:"Back to top",style:{textDecoration:"none",color:"azure"},children:"Back to top"})}),Object(h.jsx)("div",{style:{paddingTop:"1rem",fontSize:"1rem",color:"rgb(158, 187, 187)",backgroundColor:"#1a2538",left:0,bottom:0,width:"100%"},children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"d-flex justify-content-center flex-wrap p-3",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("big",{children:Object(h.jsx)("b",{children:Object(h.jsx)("u",{children:"Contact"})})})}),Object(h.jsxs)("ol",{style:{textAlign:"center",listStyle:"none",padding:0,cursor:"pointer"},children:[Object(h.jsxs)("li",{children:[Object(h.jsx)("span",{children:Object(h.jsx)("b",{children:"Helpline"})}),": +91-1231231230"]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("span",{children:Object(h.jsx)("b",{children:"Instagram ID"})}),": bookmywshow-please"]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("span",{children:Object(h.jsx)("b",{children:"Email"})}),": bookmyseat@gmail.com"]})]})]})}),Object(h.jsx)("hr",{}),Object(h.jsx)("p",{style:{fontSize:"1.5rem",textAlign:"center",paddingBottom:"2rem",color:"white"},children:"BookMySeat \xa9"})]})})]})};var w=function(){var e=Object(m.f)(),t=N(),a=t.movies,r=t.setSearch,c=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{marginTop:"5.5rem",color:"#cae7fc",marginLeft:"2rem",marginRight:"2rem",background:"linear-gradient(90deg, rgba(235,42,42,1) 100%, rgba(244,217,217,1) 100%)"},id:"goto-top",className:"jumbotron p-5 rounded",children:[Object(h.jsxs)("h1",{className:"display-4",children:["Welcome to"," ",Object(h.jsx)("b",{style:{color:"#fff",fontWeight:"600"},children:"BookMySeat"}),"!"]}),Object(h.jsx)("p",{className:"lead",children:"Search and book movie shows online. You can also filter movies based on location or genre!"}),Object(h.jsx)("hr",{style:{color:"white"}}),Object(h.jsx)("input",{className:"form-control",placeholder:"Search a movie",onChange:function(e){return c(e.target.value)}})]}),Object(h.jsx)("div",{style:{marginTop:"3rem"},children:Object(h.jsx)("div",{className:"container d-flex justify-content-evenly flex-wrap",children:a.map((function(t){return Object(h.jsxs)("div",{className:"card mb-5",style:{maxWidth:"20rem",maxHeight:"30rem",cursor:"pointer"},onClick:function(){return a=t._id,void e("/movie/".concat(a),{state:{}},{replace:!0});var a},children:[Object(h.jsx)("div",{className:"card-body",children:Object(h.jsx)("img",{className:"w-100 h-100 img-fluid",src:t.image,alt:t.name})}),Object(h.jsxs)("div",{className:"card-header",style:{backgroundColor:"#a3c1d4"},children:[Object(h.jsx)("b",{children:t.name})," ",Object(h.jsxs)("span",{className:"text-muted",children:["(",t.genre,")"]})]})]},t._id)}))})}),Object(h.jsx)(y,{})]})};var k=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),n=Object(b.a)(s,2),l=n[0],i=n[1],o=Object(m.f)();return Object(r.useEffect)((function(){localStorage.getItem("bookmyseat_user")&&"ADMIN"===JSON.parse(localStorage.getItem("bookmyseat_user")).role&&i(!0)}),[]),Object(r.useEffect)((function(){localStorage.getItem("bookmyseat_user")&&c(JSON.parse(localStorage.getItem("bookmyseat_user")).name.split(" ")[0])}),[a]),Object(h.jsx)("nav",{id:"goto-top",className:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark",children:Object(h.jsxs)("div",{className:"container-fluid fs-5",children:[Object(h.jsxs)(u.b,{className:"navbar-brand fs-4",to:"/",children:["BookMySeats",Object(h.jsx)("i",{style:{color:"tomato"},className:"m-2 bi bi-ticket-perforated-fill"})]}),Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(h.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[l?Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{className:"nav-link",to:"/theater",children:"My Theaters"})}):null,Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(u.b,{className:"nav-link",to:"/signup",children:"Sign Up"})})]}),Object(h.jsx)("div",{className:"d-flex",children:a?Object(h.jsxs)("div",{className:"d-flex align-items-center",children:[Object(h.jsxs)("span",{style:{color:"azure"},children:["Hello ",Object(h.jsx)("i",{className:"text text-primary fw-bold",children:a}),"!"]})," ","\xa0\xa0",Object(h.jsx)("button",{className:"btn btn-outline-danger",type:"submit",onClick:function(){localStorage.removeItem("bookmyseat_user"),o("/",{replace:!0}),window.location.reload(!1)},children:"Logout"})]}):null})]})]})})};var S=function(){var e=Object(m.f)(),t=N(),a=t.theaters,c=t.getTheaters,s=Object(r.useState)(""),n=Object(b.a)(s,2),l=n[0],j=n[1],u=Object(r.useState)(""),x=Object(b.a)(u,2),O=x[0],p=x[1],f=Object(r.useRef)(),v=Object(r.useRef)(),g=Object(r.useRef)(),y=Object(r.useRef)(),w=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==f.current.value&&""!==v.current.value&&""!==g.current.value){e.next=3;break}return j("All the fields are madatory!"),e.abrupt("return");case 3:return j(""),t={owner:f.current.value,name:v.current.value,helpline:g.current.value,city:y.current.value},e.prev=5,p("Creating a theater, please wait..."),e.next=9,d.a.post("https://bookmyseats.herokuapp.com/api/v1/theaters",t,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("bookmyseat_user")).token}});case 9:c(),p(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),j("Something went wrong while creating the theater, try again some time later...");case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{style:{marginTop:"5rem"},children:[Object(h.jsxs)("form",{className:"container p-3",style:{border:"1px solid lightgray",borderRadius:"1rem"},children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"owner",className:"form-label fw-bold",children:"Owner Name"}),Object(h.jsx)("input",{type:"owner",className:"form-control",id:"owner",ref:f})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"name",className:"form-label fw-bold",children:"Theater Name"}),Object(h.jsx)("input",{type:"name",className:"form-control",id:"name",ref:v})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"city",className:"form-label fw-bold",children:"City"}),Object(h.jsx)("input",{type:"city",className:"form-control",id:"city",ref:y})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"helpline",className:"form-label fw-bold",children:"Helpline Number"}),Object(h.jsx)("input",{type:"helpline",className:"form-control",id:"helpline",ref:g})]}),Object(h.jsx)("div",{className:"d-grid gap-2",children:Object(h.jsx)("button",{onClick:w,className:"btn btn-primary",type:"button",children:"Add Theater"})}),l?Object(h.jsx)("p",{className:"d-flex mt-3 justify-content-center alert alert-danger",role:"alert",children:l}):null,O?Object(h.jsx)("p",{className:"d-flex fs-5 mt-3 justify-content-center alert alert-primary",role:"alert",children:O}):null]}),Object(h.jsxs)("div",{className:"container mt-5 mb-5",children:[Object(h.jsx)("p",{className:"fs-3 fw-bold",children:"Your theaters"}),Object(h.jsx)("hr",{}),a.map((function(t){return Object(h.jsxs)("div",{className:"card mb-3",children:[Object(h.jsx)("div",{className:"fs-4 fw-bold card-header",children:t.name}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("div",{className:"fs-6 d-flex justify-content-between",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"Owner"}),": ",t.owner]}),Object(h.jsx)("div",{style:{cursor:"pointer"},children:Object(h.jsx)("i",{className:"bi bi-pencil-fill"})})]}),Object(h.jsxs)("div",{className:"fs-6",children:[Object(h.jsx)("b",{children:"Helpline"}),": ",t.helpline]}),Object(h.jsxs)("div",{className:"fs-6",children:[Object(h.jsx)("b",{children:"Create At"}),": ",t.createdAt]}),Object(h.jsxs)("div",{className:"fs-6",children:[Object(h.jsx)("b",{children:"City"}),": ",t.city]})]}),Object(h.jsx)("div",{className:"fs-4 card-header",children:Object(h.jsx)("button",{onClick:function(){return a=t._id,r=t.name,c=t.city,void e("/create-movie",{state:{theaterId:a,theaterName:r,city:c}},{replace:!0});var a,r,c},className:"btn btn-success",children:"Add a movie"})})]},t._id)}))]})]})})};var C=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(""),n=Object(b.a)(s,2),l=n[0],j=n[1],u=Object(r.useState)(""),x=Object(b.a)(u,2),O=x[0],p=x[1],f=Object(r.useState)(""),v=Object(b.a)(f,2),g=v[0],N=v[1],y=Object(r.useState)(""),w=Object(b.a)(y,2),k=w[0],S=w[1],C=Object(r.useState)(""),R=Object(b.a)(C,2),F=R[0],T=R[1],I=Object(r.useState)(""),A=Object(b.a)(I,2),_=A[0],E=A[1],P=Object(r.useRef)(),B=Object(r.useRef)(),D=Object(r.useRef)(),z=Object(r.useRef)(),J=Object(m.e)(),M=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={name:P.current.value,pgRating:g,theaterId:J.state.theaterId,theaterName:J.state.theaterName,releaseDate:_,from:F,to:k,genre:O,image:D.current.value,runtime:z.current.value},j("Adding movie, please wait..."),""!==P.current.value&&""!==g){e.next=6;break}return c("All the fields are madatory!"),j(""),e.abrupt("return");case 6:return e.prev=6,j("Creating a theater, please wait..."),e.next=10,d.a.post("https://bookmyseats.herokuapp.com/api/v1/movies",t,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("bookmyseat_user")).token}});case 10:j(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),c("Something went wrong while creating the theater, try again some time later...");case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"container",style:{marginTop:"5rem"},children:Object(h.jsxs)("form",{className:"container p-3 mb-5",style:{border:"1px solid lightgray",borderRadius:"1rem"},children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"name",className:"form-label fw-bold",children:"Movie Name"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"name",ref:P})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"image",className:"form-label fw-bold",children:"Image"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"image",ref:D})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"rating",className:"form-label fw-bold",children:"Select Film PG Rating"}),Object(h.jsxs)("select",{onChange:function(e){return N(e.target.value)},id:"rating",className:"form-select","aria-label":"Default select example",children:[Object(h.jsx)("option",{children:"Select Film Rating"}),Object(h.jsx)("option",{value:"PG-13",children:"Parental Guidance (PG-13)"}),Object(h.jsx)("option",{value:"U",children:"Universal (U)"}),Object(h.jsx)("option",{value:"R",children:"Age Restricted (R)"})]})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"name",className:"form-label fw-bold",children:"Theater Name"}),Object(h.jsx)("input",{defaultValue:J.state.theaterName,type:"name",className:"form-control",id:"name",ref:B})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"name",className:"form-label fw-bold",children:"City"}),Object(h.jsx)("input",{defaultValue:J.state.city,type:"name",className:"form-control",id:"name",ref:B})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"release",className:"form-label fw-bold",children:"Release Date"}),Object(h.jsx)("input",{onChange:function(e){return E(e.target.value)},className:"form-control",id:"release",type:"date"})]}),Object(h.jsxs)("div",{className:"mb-3 d-flex justify-content-between align-items-center",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"time",className:"form-label fw-bold",children:"Show Timing"}),Object(h.jsx)("input",{onChange:function(e){return S(e.target.value)},className:"form-control",id:"time",type:"time"})]}),Object(h.jsx)("p",{style:{marginTop:"2.4rem"},className:"fs-6 fw-bold",children:"To"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"time",className:"form-label fw-bold"}),Object(h.jsx)("input",{onChange:function(e){return T(e.target.value)},className:"form-control",id:"time",type:"time"})]})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("label",{htmlFor:"rating",className:"form-label fw-bold",children:"Select Genre"}),Object(h.jsxs)("select",{onChange:function(e){return p(e.target.value)},id:"rating",className:"form-select","aria-label":"Default select example",children:[Object(h.jsx)("option",{children:"Select Genre"}),Object(h.jsx)("option",{value:"Horror",children:"Horror"}),Object(h.jsx)("option",{value:"Comedy",children:"Comedy"}),Object(h.jsx)("option",{value:"Action",children:"Action"}),Object(h.jsx)("option",{value:"Sci-Fi",children:"Science Fiction"})]})]}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("label",{htmlFor:"runtime",className:"form-label fw-bold",children:["Movie Runtime ",Object(h.jsx)("span",{className:"text-muted",children:"(in minutes)"})]}),Object(h.jsx)("input",{className:"form-control",id:"runtime",type:"number",ref:z})]})}),Object(h.jsx)("div",{className:"d-grid gap-2",children:Object(h.jsx)("button",{onClick:M,className:"btn btn-primary",type:"button",children:"Add Movie"})}),a?Object(h.jsx)("p",{className:"d-flex mt-3 justify-content-center alert alert-danger",role:"alert",children:a}):null,l?Object(h.jsx)("p",{className:"d-flex fs-5 mt-3 justify-content-center alert alert-primary",role:"alert",children:l}):null]})})})},R="https://bookmyseats.herokuapp.com/api/v1/movies";var F=function(){var e=Object(m.f)(),t=Object(r.useState)({}),a=Object(b.a)(t,2),c=a[0],s=a[1],n=Object(r.useState)([]),l=Object(b.a)(n,2),j=l[0],u=l[1],x=Object(r.useState)(!1),O=Object(b.a)(x,2),p=O[0],f=O[1],v=Object(r.useState)(""),g=Object(b.a)(v,2),N=g[0],y=g[1],w=Object(m.g)().id,k=Object(r.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat(R,"/").concat(w));case 3:t=e.sent,s(t.data.movie),y(""),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),y("Something went wrong while fetching the movie details...");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[w]);Object(r.useEffect)((function(){k()}),[k]);var S=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,d.a.get("".concat(R,"/timings/").concat(t));case 4:a=e.sent,u(a.data.movies),y(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),y("Something went wrong while fetching the movie details...");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(t,a,r){e("/book",{state:{movie:c}},{replace:!0})};return Object(h.jsxs)("div",{className:"container mb-4",style:{marginTop:"5rem"},children:[Object(h.jsx)("div",{className:"card",style:{backgroundColor:"#dae7ed"},children:Object(h.jsxs)("div",{className:"card-body d-flex justify-content-center flex-wrap align-items-center",children:[Object(h.jsx)("div",{style:{width:"19rem"},children:Object(h.jsx)("img",{src:c.image,alt:c.name,className:"w-100"})}),Object(h.jsxs)("div",{className:"p-5 d-flex flex-column",style:{fontSize:"1.2rem"},children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"fs-2 fw-bold",children:c.name}),Object(h.jsx)("hr",{})]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Rating"}),": ",c.pgRating]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Release Date"}),": ",c.releaseDate]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Runtime"}),": ",Object(h.jsxs)("i",{children:[(c.runtime/60).toFixed(2),"hrs"]})]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Genre"}),": ",c.genre]}),Object(h.jsx)("button",{className:"btn btn-danger",onClick:function(){return S(c.name)},children:"Book Show"})]})]})}),N?Object(h.jsx)("p",{className:"d-flex justify-content-center alert alert-danger",role:"alert",children:N}):null,p?Object(h.jsxs)("div",{className:"container mt-5",children:[Object(h.jsxs)("p",{className:"fs-4",style:{fontWeight:"700"},children:['Show Timings for "',Object(h.jsx)("span",{className:"text-primary",children:c.name}),'"']}),Object(h.jsx)("hr",{}),j.map((function(e){return Object(h.jsx)("div",{className:"card m-4 p-3",children:Object(h.jsxs)("div",{className:"d-flex justify-content-between flex-wrap",children:[Object(h.jsx)("p",{className:"fs-5",children:Object(h.jsx)("b",{children:e.theaterName})}),Object(h.jsx)("button",{className:"btn btn btn-outline-success",onClick:C,children:e.from})]})},e._id)}))]}):null]})},T=a(26),I=a(25),A=a.n(I);var _=function(){var e=Object(m.e)(),t=Object(r.useState)([]),a=Object(b.a)(t,2),c=a[0],s=a[1],n=Object(r.useState)(""),l=Object(b.a)(n,2),j=l[0],u=l[1],x=Object(r.useState)(""),O=Object(b.a)(x,2),p=O[0],f=O[1],v=Array.from({length:10},(function(){return Array.from({length:10},(function(){return null}))})),g=function(){var t=Object(o.a)(i.a.mark((function t(){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==c.length&&""!==j){t.next=3;break}return f("Please select date and seats to proceed!"),t.abrupt("return");case 3:if(a={name:e.state.movie.name,seats:c,from:e.state.movie.from,to:e.state.movie.to,runTime:e.state.movie.runTime,theaterId:e.state.movie.theaterId,theaterName:e.state.movie.theaterName,amount:215*c.length,date:j},t.prev=4,"https://bookmyseats.herokuapp.com/api/v1/theaters/book",!JSON.parse(localStorage.getItem("bookmyseat_user"))){t.next=11;break}return t.next=9,d.a.post("https://bookmyseats.herokuapp.com/api/v1/theaters/book",a,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("bookmyseat_user")).token}});case 9:r=t.sent,console.log("Booking response:",r.data);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(4);case 15:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{style:{marginTop:"5rem"},className:"container",children:[Object(h.jsxs)("div",{className:"d-flex flex-column align-items-center",style:{overflow:"scroll"},children:[Object(h.jsx)("div",{style:{width:"50rem",height:"0.7rem",backgroundColor:"lightgray",borderRadius:"1rem"}}),Object(h.jsx)("div",{className:"mb-3 fs-4",children:"Psst...screen is over here!"}),Object(h.jsx)("table",{children:Object(h.jsx)("tbody",{children:v.map((function(e,t){return Object(h.jsx)("tr",{children:e.map((function(e,a){return Object(h.jsx)("td",{style:{cursor:"pointer"},className:"p-2",children:Object(h.jsxs)("div",{style:{height:"2.5rem",width:"2.5rem",backgroundColor:"#3d8f80",borderRadius:"0.2rem",textAlign:"center",color:"azure",fontWeight:"600"},onClick:function(){return function(e,t){s((function(a){return[].concat(Object(T.a)(a),[e+t])}))}(String.fromCharCode(t+65),a+1)},children:[String.fromCharCode(t+65)," ",a+1]})},a)}))},t)}))})})]}),Object(h.jsxs)("div",{className:"d-flex flex-column align-items-center my-5",children:[Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)("b",{children:"Movie"}),": ",e.state.movie.name]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)("b",{children:"Theater"}),": ",e.state.movie.theaterName]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)("b",{children:"Show time"}),": ",e.state.movie.from]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)("b",{children:"Your seats"}),":"," ",c.map((function(e){return Object(h.jsxs)("span",{children:[e,"\xa0"]},A.a.generate())}))]}),Object(h.jsxs)("div",{className:"mb-1",children:[Object(h.jsx)("b",{children:"Total amount"}),": \u20b9",215*c.length]}),Object(h.jsx)("input",{type:"date",style:{width:"11rem"},className:"form-control mb-3",onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("button",{className:"btn btn-danger",onClick:g,children:"Confirm Booking"})]}),p?Object(h.jsx)("p",{className:"d-flex mt-3 justify-content-center alert alert-danger",role:"alert",children:p}):null]})};var E=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(u.a,{children:[Object(h.jsx)(k,{}),Object(h.jsxs)(m.c,{children:[Object(h.jsx)(m.a,{path:"/",element:Object(h.jsx)(w,{})}),Object(h.jsx)(m.a,{path:"/login",element:Object(h.jsx)(x,{})}),Object(h.jsx)(m.a,{path:"/theater",element:Object(h.jsx)(S,{})}),Object(h.jsx)(m.a,{path:"/book",element:Object(h.jsx)(_,{})}),Object(h.jsx)(m.a,{path:"/create-movie",element:Object(h.jsx)(C,{})}),Object(h.jsx)(m.a,{path:"/movie/:id",element:Object(h.jsx)(F,{})}),Object(h.jsx)(m.a,{path:"/signup",element:Object(h.jsx)(O,{})}),Object(h.jsx)(m.a,{path:"/forgot-password",element:Object(h.jsx)(p,{})}),Object(h.jsx)(m.a,{path:"/reset-password/:email",element:Object(h.jsx)(f,{})})]})]})})};n.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(g,{children:Object(h.jsx)(E,{})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.321b0a78.chunk.js.map